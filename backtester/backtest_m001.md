(research) snowypainter@yukiscale:~/pairwork-invest$ python -m backtester.backtest_m001
ğŸ¯ Trigger + Sizing Models Backtest
Direction Classifier (íŠ¸ë¦¬ê±°) + Event Detector (ì‚¬ì´ì§•)
============================================================
ğŸ”§ ì „ëµ: Direction Classifierë¡œ ì§„ì… ê²°ì •, Event Detectorë¡œ í¬ì§€ì…˜ ì‚¬ì´ì§•
ğŸ“Š íŠ¸ë¦¬ê±° ì„ê³„ê°’: 0.4, ì‚¬ì´ì§• ì„ê³„ê°’: 0.5
[íŠ¸ë¦¬ê±° + ì‚¬ì´ì§• ëª¨ë¸ ë°±í…ŒìŠ¤íŠ¸]
============================================================
  ì‹œì¥: KR
  í•™ìŠµ ì—°ë„: [2018, 2019, 2020]
  í…ŒìŠ¤íŠ¸ ì—°ë„: [2021]
  ìµœëŒ€ ì¢…ëª©: 50ê°œ
  ìƒìœ„ í¬ì§€ì…˜: 10ê°œ
  ë°©í–¥ íŠ¸ë¦¬ê±° ì„ê³„ê°’: 0.4
  ì´ë²¤íŠ¸ ì‚¬ì´ì§• ì„ê³„ê°’: 0.5
============================================================

[Direction Classifier ì¤€ë¹„]
  ê¸°ì¡´ ëª¨ë¸ ë¡œë“œ: models/saved/direction_classifier_KR_2018_2019_2020.txt
ğŸ“‚ Model loaded from models/saved/direction_classifier_KR_2018_2019_2020.txt

[Event Detector ì¤€ë¹„]
  ê¸°ì¡´ í–¥ìƒëœ ëª¨ë¸ ë¡œë“œ: models/saved/event_detector_KR_2018_2019_2020_5pct.txt
[ëª¨ë¸ ë¡œë“œ] models/saved/event_detector_KR_2018_2019_2020_5pct.txt

[í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ]
Building dataset: KR, years=[2021], normalize=True
[cache] hit: data/cache/datasets/29a9b3cb37172fbc.parquet
  í…ŒìŠ¤íŠ¸ ë°ì´í„°: 1,250 í–‰
  ê¸°ë³¸ í”¼ì²˜ ìˆ˜: 68ê°œ

[Event Detector í–¥ìƒëœ í”¼ì²˜ ìƒì„±]
  [ë ˆì§ ë³€ê²½ í”¼ì²˜ ìƒì„±]
    ìƒì„±ëœ ë ˆì§ ë³€ê²½ í”¼ì²˜: 59ê°œ
  [ìƒê´€ê´€ê³„ ê¸°ë°˜ í”¼ì²˜ ìƒì„±]
    ìƒì„±ëœ ìƒê´€ê´€ê³„ í”¼ì²˜: 19ê°œ
  í–¥ìƒëœ í”¼ì²˜ ì ìš© í›„ ì»¬ëŸ¼ ìˆ˜: 147ê°œ

[íŠ¸ë¦¬ê±° + ì‚¬ì´ì§• ì‹ í˜¸ ìƒì„±]
[íŠ¸ë¦¬ê±° + ì‚¬ì´ì§• ì‹ í˜¸ ìƒì„±]
  íŠ¸ë¦¬ê±°: Direction Classifier (ì§„ì… ê²°ì •)
  ì‚¬ì´ì§•: Event Detector (í¬ì§€ì…˜ í¬ê¸° ì¡°ì ˆ)
  ì´ë²¤íŠ¸ ë°ì´í„°: 85 í–‰
  ë°©í–¥ ì˜ˆì¸¡ ì‹ í˜¸ ìƒì„± ì¤‘ (íŠ¸ë¦¬ê±°)...
  ì´ë²¤íŠ¸ ê°ì§€ ì‹ í˜¸ ìƒì„± ì¤‘ (ì‚¬ì´ì§•)...
    ëª¨ë¸ì´ ê°€ì§„ í”¼ì²˜ ìˆ˜: 94
    ë°ì´í„°ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í”¼ì²˜: 94ê°œ
    ì˜ˆì¸¡ì— ì‚¬ìš©í•  í”¼ì²˜: 94ê°œ
  íŠ¸ë¦¬ê±° + ì‚¬ì´ì§• ì‹ í˜¸ ìƒì„± ì¤‘...
  ì‹ í˜¸ í†µê³„:
    ë°©í–¥ ì‹ í˜¸ í‰ê· : 0.580
    íŠ¸ë¦¬ê±° í™œì„±í™”: 80.0ê°œ (ì„ê³„ê°’: 0.4)
    ì´ë²¤íŠ¸ ì‹ í˜¸ í‰ê· : 0.447
    ì‚¬ì´ì§• ì‹ í˜¸ í‰ê· : 0.558
    ìµœì¢… ì‹ í˜¸ í‰ê· : 0.177
    ìµœì¢… ì‹ í˜¸ ë²”ìœ„: 0.000 ~ 0.918
    ìœ íš¨ ê±°ë˜ ì‹ í˜¸: 22ê°œ
  ì†Œìš”ì‹œê°„: 0.06ì´ˆ

[ë°±í…ŒìŠ¤íŠ¸ ì„¤ì •]
  ì‹ í˜¸ ì»¬ëŸ¼: final_signal
  ì„¤ì •ëœ ì„ê³„ê°’: 0.5
  ìœ ë‹ˆë²„ìŠ¤ í¬ê¸°: 50
  ìµœì†Œ ê±°ë˜ëŒ€ê¸ˆ: 1,000.0ì›
  ìµœì†Œ ê°€ê²©: 50ì›

[ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰]

[ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œì‘]
============================================================
[ë°ì´í„° ê²€ì¦]
  ì…ë ¥ ë°ì´í„°: 1,250 í–‰ Ã— 150 ì—´
  ë‚ ì§œ ë²”ìœ„: 2021-01-04 00:00:00 ~ 2021-06-03 00:00:00
  ê³ ìœ  ì¢…ëª©ìˆ˜: 49ê°œ
[ìœ ë‹ˆë²„ìŠ¤ ì„ íƒ ì‹œì‘]
  ì´ˆê¸° ë°ì´í„°: 1,250 í–‰
  ê¸°ë³¸ í•„í„°ë§ í›„: 398 í–‰
  ìƒìœ„ 50ê°œ ì„ íƒ í›„: 398 í–‰
  ì†Œìš”ì‹œê°„: 0.03ì´ˆ
[í¬ì§€ì…˜ ì„ íƒ ì‹œì‘]
  ì‹ í˜¸ í†µê³„:
shape: (9, 2)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ statistic  â”† final_signal â”‚
â”‚ ---        â”† ---          â”‚
â”‚ str        â”† f64          â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ count      â”† 398.0        â”‚
â”‚ null_count â”† 0.0          â”‚
â”‚ mean       â”† 0.033568     â”‚
â”‚ std        â”† 0.148715     â”‚
â”‚ min        â”† 0.0          â”‚
â”‚ 25%        â”† 0.0          â”‚
â”‚ 50%        â”† 0.0          â”‚
â”‚ 75%        â”† 0.0          â”‚
â”‚ max        â”† 0.880154     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ì„ê³„ê°’ í•„í„°ë§ í›„ (>=0.5): 20 í–‰
  ìƒìœ„ 10ê°œ ì„ íƒ í›„: 20 í–‰
  ë¡±ì˜¨ë¦¬ í•„í„°ë§ í›„: 20 í–‰
  ì†Œìš”ì‹œê°„: 0.04ì´ˆ
  ì´ ì„ íƒ í¬ì§€ì…˜: 20ê°œ
[ê°€ì¤‘ì¹˜ ë° ìë³¸ í• ë‹¹ ì‹œì‘]
  ì†Œìš”ì‹œê°„: 0.02ì´ˆ
  ìë³¸ ë°°ë¶„ í˜„í™©:
    ì‹œê·¸ë„ë‹¹ íˆ¬ìê¸ˆ: 1,000,000ì› (ê³ ì •)
    ì¼í‰ê·  í¬ì§€ì…˜: 1.3ê°œ
    ì¼í‰ê·  ì´ íˆ¬ìê¸ˆ: 1,300,000ì›
    ìµœëŒ€ ì¼ íˆ¬ìê¸ˆ: 2,000,000ì›
[ìˆ˜ìˆ˜ë£Œ ì ìš© ë° ìˆ˜ìµë¥  ê³„ì‚° ì‹œì‘]
  ì†Œìš”ì‹œê°„: 0.00ì´ˆ
[ì¼ë³„ ê²°ê³¼ ì§‘ê³„]
  ê±°ë˜ì¼ìˆ˜: 17ì¼
[ìë³¸ ê³¡ì„  ê³„ì‚°]
[ì„±ê³¼ ì§€í‘œ ê³„ì‚°]
  ì—°ê°„í™” ê³„ì‚°: total_days=17, trading_days=17, factor=10.00
  ì´ ìˆ˜ìµë¥ : 0.1777, ì—°ê°„ ìˆ˜ìµë¥ : 4.1333
[ì¢…ëª©ë³„ ì„±ê³¼ ë¶„ì„]

[ë°±í…ŒìŠ¤íŠ¸ ì™„ë£Œ] ì´ 0.16ì´ˆ ì†Œìš”
============================================================
[ìµœì¢… ì„±ê³¼]
  ìµœì¢… ìë³¸: 1.18
  ì—°ê°„ ìˆ˜ìµë¥ : 413.33%
  ìƒ¤í”„ ë¹„ìœ¨: 2.10
  ìµœëŒ€ ë‚™í­: -22.87%
  ìŠ¹ë¥ : 58.8%

[ìë³¸ ë°°ë¶„ ìš”ì•½]
  ì¢…ëª©ë‹¹ ìë³¸: 1,000,000ì›
  ì¼í‰ê·  ìë³¸: 1,176,471ì›
  ìµœëŒ€ ì¼ìë³¸: 2,000,000ì›
  ì´ ê³ ìœ  ì¢…ëª©: 5ê°œ

[ìƒìœ„ 10ê°œ ì¢…ëª© ì„±ê³¼]
  1. 037460: 249,167ì› (+6.2%) [4ê±°ë˜, 75.0%ìŠ¹ë¥ ]
  2. 160980: 74,867ì› (+7.5%) [1ê±°ë˜, 100.0%ìŠ¹ë¥ ]
  3. 086960: 51,680ì› (+5.2%) [1ê±°ë˜, 100.0%ìŠ¹ë¥ ]
  4. 086710: 13,707ì› (+0.3%) [4ê±°ë˜, 50.0%ìŠ¹ë¥ ]
  5. 045890: -151,056ì› (-1.5%) [10ê±°ë˜, 40.0%ìŠ¹ë¥ ]

[ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼]
  ì„±ê³¼ ì§€í‘œ:
    ê±°ë˜ì¼ìˆ˜: 17
    ì—°ê°„ ìˆ˜ìµë¥ : 413.33%
    ë³€ë™ì„±: 196.75%
    ìƒ¤í”„ ë¹„ìœ¨: 2.10
    ìµœëŒ€ ë‚™í­: -22.87%
    ìŠ¹ë¥ : 58.8%
    ì´ ê±°ë˜: 20

  ì‹ í˜¸ í•„í„°ë§ ê³¼ì • ë¶„ì„:
    ì „ì²´ ë°ì´í„°: 1,250 í–‰
    ë°©í–¥ íŠ¸ë¦¬ê±° í™œì„±í™”: 80 í–‰ (â‰¥0.4)
    ì´ë²¤íŠ¸ ì‚¬ì´ì§• í™œì„±í™”: 85 í–‰ (â‰¥0.5)
    ìµœì¢… ì‹ í˜¸: 22 í–‰ (>0)
    ë°±í…ŒìŠ¤í„° ê±°ë˜ì¼ìˆ˜: 17 ì¼
    ì´ ê±°ë˜ìˆ˜: 20
    í‰ê·  ì¼ë³„ í¬ì§€ì…˜: 1.2
    í‰ê·  ì¼ë³„ ìˆ˜ìµë¥ : 0.0167 (1.67%)
    ì¼ë³„ ìˆ˜ìµë¥  ë²”ìœ„: -0.1824 ~ 0.2984
    ìˆ˜ìµ ì¼ìˆ˜: 10/17 (58.8%)

  ë°±í…ŒìŠ¤í„° ì²˜ë¦¬ ê²°ê³¼:
    ì²˜ë¦¬ëœ ì´ ë°ì´í„°: 398 í–‰
    ì„ íƒëœ í¬ì§€ì…˜: 20 í–‰
    ì´ íˆ¬ìê¸ˆ: 20,000,000ì›
    ê°œë³„ ê±°ë˜ í‰ê·  ìˆ˜ìµë¥ : 0.0119 (1.19%)
    ê°œë³„ ê±°ë˜ ìˆ˜ìµë¥  ë²”ìœ„: -0.1824 ~ 0.2984
    ë°±í…ŒìŠ¤í„° ìµœì¢… ìˆ˜ìµë¥ : 0.1777 (17.77%)
    ì„ íƒëœ ê±°ë˜ì˜ ìµœì¢… ì‹ í˜¸-ìˆ˜ìµë¥  ìƒê´€ê´€ê³„: -0.169
    ì„ íƒëœ ê±°ë˜ ì‹ í˜¸ í†µê³„:
      ìµœì¢… ì‹ í˜¸ í‰ê· : 0.668
      ìµœì¢… ì‹ í˜¸ ë²”ìœ„: 0.515 ~ 0.880
    ì„ íƒëœ ê±°ë˜ ìˆ˜ìµë¥  í†µê³„:
      í‰ê· : 0.0132 (1.32%)
      ë²”ìœ„: -0.1811 ~ 0.2997
    ì¼ë³„ ê±°ë˜ ë¶„í¬:
      í‰ê· : 1.2 ê±°ë˜/ì¼
      ìµœëŒ€: 2 ê±°ë˜/ì¼
      ì´ ê±°ë˜ì¼: 17 ì¼

  ì…ë ¥ ë°ì´í„° ì²´í¬:
    ì»¬ëŸ¼: ['date', 'open', 'high', 'low', 'close', 'adj_close', 'volume', 'turnover', 'exchange', 'currency', 'market', 'ticker', 'year', 'futret_1', 'label_1d_cls', 'logret_1', 'ret_5', 'atr5', 'atr10', 'atr14', 'vwap10', 'vwap20', 'rsi5', 'rsi10', 'rsi14', 'sma5', 'sma10', 'sma20', 'sma50', 'ema5', 'ema10', 'ema20', 'ema50', 'roc5', 'roc10', 'roc20', 'rsi6', 'stochk5', 'stochk14', 'stochd14', 'willr14', 'cci20', 'macd', 'macd_signal', 'macd_hist', 'vol10', 'vol20', 'parkinson20', 'gk20', 'tr14', 'obv', 'mfi14', 'cmf20', 'vol_z20', 'vol_roc5', 'don20_hi', 'don20_lo', 'don55_hi', 'don55_lo', 'pos_in_don20', 'rel_range', 'corr_close_vol20', 'corr_obv_vwap20', 'curv5', 'dev_sma20', 'dev_ema20', 'ma_squeeze_20_50', 'ema12_26_rel', 'v_score_5', 'v2_score_5', 'v_score_10', 'v2_score_10', 'v_score_15', 'v2_score_15', 'v_score_20', 'v2_score_20', 'v_score_40', 'v2_score_40', 'v_score_60', 'v2_score_60', 'v_score_90', 'v2_score_90', 'v_score_partial_5', 'v2_score_partial_5', 'v_score_partial_10', 'v2_score_partial_10', 'v_score_partial_15', 'v2_score_partial_15', 'dcmf_3', 'd2cmf_3', 'dobv_3', 'd2obv_3', 'dcmf_5', 'd2cmf_5', 'dobv_5', 'd2obv_5', 'dcmf_10', 'd2cmf_10', 'dobv_10', 'd2obv_10', 'signflip_cmf_3', 'signflip_obv_3', 'signflip_cmf_5', 'signflip_obv_5', 'signflip_cmf_10', 'signflip_obv_10', 'v_score_ens_short', 'v2_score_ens_short', 'v_score_ens', 'v2_score_ens', 'v_score_ens_long', 'v2_score_ens_long', 'cmf_slope_5', 'obv_slope_5', 'vwap_slope_5', 'cmf_slope_10', 'obv_slope_10', 'vwap_slope_10', 'cmf_slope_20', 'obv_slope_20', 'vwap_slope_20', 'cmf_slope_40', 'obv_slope_40', 'vwap_slope_40', 'cmf_slope_60', 'obv_slope_60', 'vwap_slope_60', 'bb_lower', 'atr_rsi_corr_5', 'atr_rsi_corr_10', 'atr_rsi_corr_20', 'macd_bb_corr_5', 'macd_bb_corr_10', 'macd_bb_corr_20', 'vol_momentum_corr_5', 'vol_momentum_corr_10', 'vol_price_corr_5', 'vol_price_corr_10', 'vol_price_corr_20', 'rsi_stoch_corr_5', 'rsi_stoch_corr_10', 'vwap_cmf_corr_5', 'vwap_cmf_corr_10', 'vwap_cmf_corr_20', 'atr_rsi_ratio', 'macd_vol_ratio', 'cmf_obv_ratio', 'signal_trigger', 'signal_size', 'final_signal']
    ê°•í•œ ì‹ í˜¸ ë°ì´í„° (22ê°œ):
    ìƒìœ„ 5ê°œ ì‹ í˜¸:
      2021-02-01 00:00:00 103230: final=0.918, trigger=0.635, size=0.918, ret=-0.0626
      2021-02-22 00:00:00 045890: final=0.880, trigger=0.557, size=0.880, ret=-0.0525
      2021-03-22 00:00:00 045890: final=0.824, trigger=0.558, size=0.824, ret=-0.1753
      2021-02-18 00:00:00 045890: final=0.815, trigger=0.572, size=0.815, ret=-0.0554
      2021-02-25 00:00:00 086710: final=0.813, trigger=0.570, size=0.813, ret=-0.0705

[ì°¨íŠ¸ ìƒì„±]
[ì €ì¥] ìë³¸ ê³¡ì„ : reports/backtest_trigger_size/equity_curve.png
[ì €ì¥] ë‚™í­ ì°¨íŠ¸: reports/backtest_trigger_size/drawdown.png
[ì €ì¥] ì›”ë³„ íˆíŠ¸ë§µ: reports/backtest_trigger_size/monthly_heatmap.png
[Rolling Sharpe] ë°ì´í„° ê¸¸ì´: 17ì¼, window size: 10ì¼
[Rolling Sharpe ë””ë²„ê¹…] window=10
  series í†µê³„: mean=0.01674932, std=0.12394400
  series ë²”ìœ„: -0.18240236 ~ 0.29837427
  ë°ì´í„° ê¸¸ì´: 17
  rolling_sharpe í†µê³„: mean=4.958995, std=4.044785
  NaN ê°œìˆ˜: 1, ìœ íš¨ ê°’ ê°œìˆ˜: 16
  ìµœì¢… rolling_sharpe ë²”ìœ„: 0.000000 ~ 14.674220
[ì €ì¥] ë¡¤ë§ ìƒ¤í”„ ë¹„ìœ¨: reports/backtest_trigger_size/rolling_sharpe.png
[ì €ì¥] ì¢…ëª©ë³„ ì„±ê³¼: reports/backtest_trigger_size/ticker_performance.png

[ì™„ë£Œ] ì´ 8.70ì´ˆ ì†Œìš”

ğŸ‰ íŠ¸ë¦¬ê±° + ì‚¬ì´ì§• ëª¨ë¸ ë°±í…ŒìŠ¤íŠ¸ ì™„ë£Œ!
ğŸ“ ê²°ê³¼ëŠ” reports/backtest_trigger_size/ ì—ì„œ í™•ì¸í•˜ì„¸ìš”