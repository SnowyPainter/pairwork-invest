# M001 Analytics: 기술적 지표 성능 분석 결과 해석 가이드

## 📊 개요
M001 모듈은 주식 기술적 지표들의 예측 성능을 분석하여 Information Coefficient (IC)와 산점도를 생성합니다.

**분석 대상**: 한국 주식시장 (KR), 2018-2020년, 최대 30개 종목  
**이벤트 정의**: 다음날 수익률이 ±5% 이상인 경우  
**목표**: 미래 수익률(`futret_1`) 예측에 유효한 기술적 지표 식별

---

## 📁 Output 파일 구조

```
analytics/outputs/M001/
├── tables/                     # 수치 분석 결과
│   ├── ic_summary.csv          # 지표별 종합 성능 (⭐ 가장 중요)
│   ├── ic_by_date_long.csv     # 날짜별 IC 시계열
│   └── event_rate_by_date.csv  # 날짜별 이벤트 발생률
└── plots/                      # 시각화 결과
    ├── scatter_all_*.png       # 전체 데이터 산점도 (16개)
    └── scatter_event_*.png     # 이벤트 전용 산점도 (16개)
```

---

## 📈 Tables 해석 가이드

### 1. `ic_summary.csv` - 지표별 종합 성능 ⭐

가장 중요한 파일로, 각 기술적 지표의 예측 성능을 요약합니다.

**컬럼 설명:**
- `feature`: 기술적 지표명
- `n_days`: 분석 기간 (일수)
- `ic_mean`: 평균 IC (Information Coefficient)
- `ic_std`: IC 표준편차
- **`ic_ir`**: Information Ratio = ic_mean/ic_std (핵심 지표!)

**IC (Information Coefficient) 해석:**
- **범위**: -1 ~ +1
- **+1에 가까울수록**: 지표↑ → 수익률↑ (강한 양의 상관관계)
- **0에 가까울수록**: 예측력 없음
- **-1에 가까울수록**: 지표↑ → 수익률↓ (역방향 예측)

**IR (Information Ratio) 기준:**
- **0.15 이상**: 우수한 지표 ✅
- **0.10~0.15**: 괜찮은 지표 ⚠️
- **0.10 미만**: 예측력 부족 ❌

**실제 결과 예시:**
```csv
feature,n_days,ic_mean,ic_std,ic_ir
corr_obv_vwap20,183,0.0407,0.284,0.143  ← 최고 성능
vwap20,183,0.0398,0.315,0.126           ← 우수한 성능
macd_signal,183,0.0423,0.339,0.125      ← 우수한 성능
atr10,183,0.0174,0.351,0.050            ← 성능 부족
```

### 2. `ic_by_date_long.csv` - 날짜별 IC 시계열

각 지표의 IC가 시간에 따라 어떻게 변화하는지 추적합니다.

**활용법:**
- IC 안정성 확인 (변동이 큰 지표는 리스크)
- 특정 기간 성능 악화 구간 식별
- 60일 이동평균(`ic_ma60`)으로 추세 파악

### 3. `event_rate_by_date.csv` - 날짜별 이벤트 발생률

각 날짜에 전체 종목 중 몇 %가 이벤트(±5% 변동)를 겪었는지 보여줍니다.

**해석:**
- **0.0**: 모든 종목이 ±5% 미만 변동 (안정적인 날)
- **0.2**: 20%의 종목이 ±5% 이상 변동 (변동성 높은 날)
- **0.3 이상**: 시장 충격/위기 상황

---

## 🎯 Plots 해석 가이드

### 산점도 유형별 특징

#### 1. `scatter_all_*.png` - 전체 데이터 산점도
- **X축**: 기술적 지표 값
- **Y축**: `futret_1` (다음날 수익률)
- **포함 범위**: 모든 수익률 (-∞ ~ +∞)
- **특징**: 데이터가 조밀하게 분포, 0% 근처에 집중

#### 2. `scatter_event_*.png` - 이벤트 전용 산점도
- **X축**: 기술적 지표 값  
- **Y축**: `futret_1` (다음날 수익률)
- **포함 범위**: |수익률| ≥ 5%만 (극단 상황)
- **특징**: 상하로 분리된 두 클러스터 (±5% 경계선 비어있음)

### 산점도 해석 방법

**좋은 지표의 특징:**
1. **명확한 기울기**: 빨간 회귀선이 뚜렷한 기울기를 가짐
2. **일관된 방향성**: 전체/이벤트 산점도에서 같은 방향
3. **밀집도**: 회귀선 주변으로 점들이 밀집

**나쁜 지표의 특징:**
1. **평평한 회귀선**: 기울기가 거의 0에 가까움
2. **산발적 분포**: 점들이 무작위로 흩어져 있음
3. **방향 불일치**: 전체/이벤트에서 서로 다른 패턴

### 구체적 해석 예시

**우수한 지표 (`vwap20`):**
```
Y축 (futret_1)
+0.15 |    •••/        ← 상승 이벤트들이 우상향 패턴
+0.10 |   ••/••        
+0.05 |________________ (이벤트 경계)
      |                 (비어있는 구간)
-0.05 |________________ (이벤트 경계)
-0.10 |  /••••         ← 하락 이벤트들도 일관된 패턴
-0.15 | /••••          
      |________________
      X축 (vwap20 값)
```

**성능 부족 지표 (`atr10`):**
```
Y축 (futret_1)
+0.15 | •  • •  •      ← 무작위 분포
+0.10 |  • •  • •      
+0.05 |________________
      |
-0.05 |________________ 
-0.10 |  • • • •       ← 패턴 없음
-0.15 | • •  •  •      
      |________________
      X축 (atr10 값)
```

---

## 🚀 실전 활용 방법

### 1. 지표 선별 프로세스
```python
# 1단계: ic_summary.csv에서 IR 상위 지표 선택
top_indicators = ["corr_obv_vwap20", "vwap20", "macd_signal"]

# 2단계: 해당 지표들의 산점도 시각적 검증
# scatter_event_*.png 파일들 확인

# 3단계: ic_by_date_long.csv에서 시계열 안정성 검증
```

### 2. 포트폴리오 전략 개발
- **매수 신호**: 선별된 지표들이 양의 IC를 보이는 구간
- **매도 신호**: IC가 음수로 전환되거나 불안정해지는 구간
- **포지션 조절**: `event_rate`가 높은 기간에는 리스크 축소

### 3. 백테스팅 검증
- 선별된 지표들로 예측 모델 구축
- 이벤트 상황에서의 성능 별도 검증
- IC 시계열의 변동성을 고려한 리스크 관리

---

## ⚠️ 주의사항

1. **과최적화 위험**: 과거 데이터에만 최적화된 지표일 수 있음
2. **시장 환경 변화**: 분석 기간(2018-2020) 이후 시장 특성 변화 가능
3. **표본 편향**: 최대 30개 종목으로 제한된 분석
4. **이벤트 정의**: ±5% 기준이 모든 시장 상황에 적합하지 않을 수 있음

---

## 📚 추가 분석 권장사항

1. **기간별 분석**: 2018, 2019, 2020년 개별 분석
2. **섹터별 분석**: 업종별 지표 유효성 차이 확인  
3. **변동성별 분석**: 고변동성/저변동성 구간별 성능 비교
4. **조합 지표**: 상위 지표들의 선형결합 모델 개발

---

*생성일: $(date)*  
*분석 대상: KR 시장, 2018-2020, 최대 30개 종목*  
*이벤트 기준: ±5% 수익률*
